<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DownOwl - Video Downloader</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap 5 & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
      font-family: 'Segoe UI', sans-serif;
    }

    /* Header */
    .top-header {
      background-color: #fff;
      padding: 0.8rem 1rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      font-weight: 700;
      font-size: 22px;
      color: #e1306c;
    }

    /* Horizontal Nav */
    .horizontal-nav {
      background-color: #f8f9fa;
      border-bottom: 1px solid #dee2e6;
      padding: 0.4rem 1rem;
    }
    .horizontal-nav .nav-link {
      margin-right: 0.8rem;
      font-size: 0.95rem;
      font-weight: 500;
      color: #444;
      display: inline-flex;
      align-items: center;
      transition: color 0.3s ease, transform 0.2s ease;
      cursor: pointer;
    }
    .horizontal-nav .nav-link i {
      color: #e1306c;
      font-size: 1rem;
      margin-right: 6px;
      transition: color 0.3s ease;
    }
    .horizontal-nav .nav-link.active,
    .horizontal-nav .nav-link:hover {
      color: #e1306c;
      transform: translateY(-2px);
    }
    .horizontal-nav .nav-link:hover i {
      color: #c1275b;
    }

    /* Card Form */
    .card {
      border-radius: 20px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    }
    .btn-custom {
      background: #e1306c;
      color: white;
      font-weight: 500;
      border-radius: 10px;
    }
    .btn-custom:hover {
      background: #c1275b;
      color: white;
    }
    .title {
      font-weight: 700;
      color: #e1306c;
    }
    .logo {
      font-size: 40px;
      color: #e1306c;
    }

    /* Footer */
    footer {
      margin-top: 50px;
      padding: 25px 0 15px 0;
      background: linear-gradient(135deg, #f8f9fa, #e9ecef);
      border-top: 1px solid #ddd;
      box-shadow: 0 -3px 6px rgba(0, 0, 0, 0.05);
    }
    .footer-icon {
      font-size: 1.2rem;
      margin-right: 6px;
      color: #e1306c;
      transition: color 0.2s ease-in-out;
    }
    footer a {
      color: #333;
      font-weight: 500;
      text-decoration: none;
      transition: color 0.2s ease-in-out;
    }
    footer a:hover {
      color: #e1306c;
    }
    footer p {
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>

  <!-- Top Header -->
  <div class="top-header d-flex align-items-center justify-content-between">
    <span>ü¶â DownOwl</span>
  </div>

  <!-- Horizontal Navbar -->
  <div class="horizontal-nav d-flex justify-content-end flex-wrap">
    <div class="nav-link active" data-platform="instagram"><i class="bi bi-instagram"></i> Instagram</div>
    <div class="nav-link" data-platform="youtube"><i class="bi bi-youtube"></i> YouTube</div>
    <div class="nav-link" data-platform="facebook"><i class="bi bi-facebook"></i> Facebook</div>
    <div class="nav-link" data-platform="contact"><i class="bi bi-envelope-fill"></i> Contact</div>
  </div>

  <!-- Main Content -->
  <div class="container d-flex align-items-center justify-content-center" style="min-height: 80vh; padding-top: 40px;">
    <div class="card p-4 text-center w-100" style="max-width: 500px;">
      <div class="logo" id="form-logo">ü¶â <i class="bi bi-instagram"></i></div>
      <h2 class="title mb-3">DownOwl</h2>
      <p class="text-muted" id="form-subtitle">Smart & Fast Instagram Video Downloader</p>

      <form id="downloadForm">
        <input type="text" id="url" class="form-control mb-3" placeholder="Paste Instagram video link here" required>
        
        <!-- YouTube specific option -->
        <select id="youtubeOption" class="form-select mb-3" style="display: none;">
          <option value="video">Audio + Video</option>
          <option value="audio">Audio Only</option>
        </select>

        <button type="submit" class="btn btn-custom w-100">Download</button>
      </form>

      <div id="result" class="mt-3"></div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="text-center">
    <div class="container">
      <p class="mb-1">ü¶â <strong>DownOwl</strong> ‚Äî Download Smarter, Fly Higher</p>
      <p class="mb-1">
        <a href="mailto:rajendradas5543@gmail.com"><i class="bi bi-envelope-fill footer-icon"></i> rajendradas5543@gmail.com</a>
      </p>
      <p class="mb-1">
        <a href="https://github.com/Rajendra9692385543" target="_blank"><i class="bi bi-github footer-icon"></i> GitHub</a>
      </p>
    </div>
    <p class="text-muted mt-3 mb-1">¬© 2025 DownOwl. All rights reserved.</p>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const navLinks = document.querySelectorAll('.horizontal-nav .nav-link');
    const formSubtitle = document.getElementById('form-subtitle');
    const urlInput = document.getElementById('url');
    const formLogo = document.getElementById('form-logo');
    const youtubeSelect = document.getElementById('youtubeOption');

    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        navLinks.forEach(l => l.classList.remove('active'));
        link.classList.add('active');

        const platform = link.getAttribute('data-platform');

        // Reset YouTube select
        youtubeSelect.style.display = "none";

        if(platform === 'instagram') {
          formSubtitle.textContent = "Smart & Fast Instagram Video Downloader";
          urlInput.placeholder = "Paste Instagram video link here";
          formLogo.innerHTML = "ü¶â <i class='bi bi-instagram'></i>";
        } else if(platform === 'youtube') {
          formSubtitle.textContent = "Download YouTube Videos Instantly";
          urlInput.placeholder = "Paste YouTube video link here";
          formLogo.innerHTML = "ü¶â <i class='bi bi-youtube'></i>";
          youtubeSelect.style.display = "block"; // show option for YouTube
        } else if(platform === 'facebook') {
          formSubtitle.textContent = "Download Facebook Videos Quickly";
          urlInput.placeholder = "Paste Facebook video link here";
          formLogo.innerHTML = "ü¶â <i class='bi bi-facebook'></i>";
        } else if(platform === 'contact') {
          formSubtitle.textContent = "Contact Us via Email";
          urlInput.placeholder = "Enter your message here";
          formLogo.innerHTML = "ü¶â <i class='bi bi-envelope-fill'></i>";
        }
      });
    });

    // Form submission
    document.getElementById("downloadForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const url = urlInput.value;
      const platform = document.querySelector('.horizontal-nav .nav-link.active').getAttribute('data-platform');
      const resultDiv = document.getElementById("result");

      if(platform === 'contact') {
        resultDiv.innerHTML = `<div class="text-info">üìß Please send an email to rajendradas5543@gmail.com</div>`;
        return;
      }

      let option = null;
      if(platform === 'youtube') {
        option = youtubeSelect.value; // get selected audio/video option
      }

      resultDiv.innerHTML = "<div class='text-info'>Fetching video...</div>";

      const res = await fetch(`/download/${platform}`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ url, option })
      });

      const data = await res.json();
      if (data.success) {
        resultDiv.innerHTML =
          `<a href="${data.download_url}" class="btn btn-success mt-2 w-100" target="_blank">‚úÖ Click to Download</a>`;
      } else {
        resultDiv.innerHTML = `<div class="text-danger">‚ùå Error: ${data.error}</div>`;
      }
    });
    async function downloadYoutube(url, option) {
  const loader = document.getElementById("loader");
  loader.style.display = "flex"; // show loader

  try {
    let response = await fetch("/download/youtube", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ url, option })
    });

    let data = await response.json();
    loader.style.display = "none"; // hide loader

    if (data.success) {
      window.location.href = data.download_url; // auto-download
    } else {
      alert("‚ùå Error: " + data.error);
    }
  } catch (err) {
    loader.style.display = "none";
    alert("‚ùå Request failed: " + err);
  }
}
  </script>
</body>
</html>
